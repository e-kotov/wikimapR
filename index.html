<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Download and import of Wikimapia data as sf
    objects.  Wikimapia data is retrieved via the Wikimapia API and
    converted to `sf` objects retaining all recevied fields.">
<title>Import Wikimapia Data as Simple Features via API • wikimapR</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Import Wikimapia Data as Simple Features via API">
<meta property="og:description" content="Download and import of Wikimapia data as sf
    objects.  Wikimapia data is retrieved via the Wikimapia API and
    converted to `sf` objects retaining all recevied fields.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">wikimapR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/e-kotov/wikimapR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><p>wikimapR, an R package for importing Wikimapia data as Simple Features via API ================</p>
<!-- README.md is generated from README.Rmd. Please edit that file -->
<p><a href="https://zenodo.org/badge/latestdoi/161494897" target="_blank" class="external-link"><img src="https://zenodo.org/badge/161494897.svg" alt="DOI"></a></p>
<p><code>wikimapR</code> is an R package for accessing the raw vector data from Wikimapia via official <a href="http://wikimapia.org/api" target="_blank" class="external-link">Wikimapia API</a>. Map data is returned as <a href="https://cran.r-project.org/package=sf" target="_blank" class="external-link">Simple Features (<code>sf</code>)</a> objects with some of the object details included as nested <code>lists</code>.</p>
<p>WARNING: the package may NOT work for now because of the breaking change in the Wikimapia API. More details at <a href="https://github.com/e-kotov/wikimapR/issues/2" target="_blank" class="external-link">https://github.com/e-kotov/wikimapR/issues/2</a>. Using ‘example’ API key does not seem to work, however everything seems to be working with private API keys.</p>
<p><strong>This package is at a VERY alpha stage. Provided ‘as is’. Use with caution.</strong></p>
<p>You may also want to try <a href="https://github.com/plandex/wikimapia-api-py" target="_blank" class="external-link">a similar package for Python</a>.</p>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>To install:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install the development version</span></span>
<span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"e-kotov/wikimapR"</span><span class="op">)</span></span></code></pre></div>
<p>To load the package and check the version:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/e-kotov/wikimapR/" class="external-link">wikimapR</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion</a></span><span class="op">(</span><span class="st">"wikimapR"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] '0.1.2'</span></span></code></pre></div>
<p>Load additional packages:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-lib/progress#readme" class="external-link">progress</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h3>
<p>Set your API key. There is the API key ‘example’ that’s used by the testing page <a href="https://wikimapia.org/api/?action=examples" target="_blank" class="external-link">https://wikimapia.org/api/?action=examples</a>. It is limited to one request every 30 seconds. Get your own API key at <a href="https://wikimapia.org/api/?action=my_keys" target="_blank" class="external-link">https://wikimapia.org/api/?action=my_keys</a> to get up to 100 requests in 5 minutes.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># change to your own key</span></span>
<span><span class="fu"><a href="reference/set_wikimapia_api_key.html">set_wikimapia_api_key</a></span><span class="op">(</span><span class="st">"your_key"</span><span class="op">)</span></span>
<span><span class="co"># set_wikimapia_api_key("example) # use 'example' key with 1 request per 30 seconds rate limit</span></span></code></pre></div>
<div class="section level4">
<h4 id="choose-a-bbox">Choose a bbox<a class="anchor" aria-label="anchor" href="#choose-a-bbox"></a>
</h4>
<p>Have a look at <a href="https://boundingbox.klokantech.com" target="_blank" class="external-link">https://boundingbox.klokantech.com</a> and choose a bounding box. For example: <code>-1.617122,53.764541,-1.467519,53.831568</code> for Leeds and it’s surroundings.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bbox</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1.669629</span>,<span class="fl">53.739816</span>,<span class="op">-</span><span class="fl">1.422465</span>,<span class="fl">53.869239</span><span class="op">)</span> <span class="co"># Leeds</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="get-the-number-of-objects-in-this-bounding-box">Get the number of objects in this bounding box<a class="anchor" aria-label="anchor" href="#get-the-number-of-objects-in-this-bounding-box"></a>
</h4>
<p>Use <a href="http://wikimapia.org/api#oldbox" target="_blank" class="external-link"><code>box</code></a> API function to get the number of features in your area of interest.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wm</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wm_get_from_bbox.html">wm_get_from_bbox</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">bbox</span>, get_location <span class="op">=</span> <span class="cn">FALSE</span>, meta_only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">wm</span><span class="op">$</span><span class="va">found</span></span>
<span><span class="co">#&gt; [1] 1320</span></span></code></pre></div>
<p>Now we know how many objects we have in the bounding box.</p>
<p>There are <code>page</code> and <code>count</code> parameters in the Wikimapia API, but you cannot request objects from a bounding box beyond 10 000 no matter how high you set the <code>page</code> parameter. So you have to subdivide the large bounding box that you have into smaller bounding boxes with a maximum of 10 000 objects each.</p>
</div>
<div class="section level4">
<h4 id="subdivide-the-bounding-box-into-smaller-ones">Subdivide the bounding box into smaller ones<a class="anchor" aria-label="anchor" href="#subdivide-the-bounding-box-into-smaller-ones"></a>
</h4>
<p><code><a href="reference/subdivide_bbox.html">subdivide_bbox()</a></code> subdivides a large bounding box into smaller ones and returns <code>sf polygons</code>, or <code>bbox</code> objects or both. It is good for large areas with defaults tuned to cities like Moscow.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">small_bboxes</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/subdivide_bbox.html">subdivide_bbox</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">bbox</span>, bbox_cell_size <span class="op">=</span> <span class="fl">0.1</span>, return_bbox_or_sf <span class="op">=</span> <span class="st">"both"</span><span class="op">)</span></span>
<span><span class="co">#&gt; 6 bounding boxes created with approximate cell size of 6577x11120 meters.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">small_bboxes</span><span class="op">$</span><span class="va">sf</span><span class="op">$</span><span class="va">geometry</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-subdivide_bbox-1.png" width="672"></p>
<p>In this example the bounding box cell size is in degrees (need to somehow fix that to work with meters across the globe). Default of 0.045 degrees is reasonably large, roughly equivalent to 2845x5010 meters. It has proved to fit &lt; 10 000 objects per cell in Moscow, where the density of objects is quite high. For less object-dense cities you may be able to get away with larger grid of bounding boxes.</p>
<p>This is not ideal and it would be more convenient to create this subdivision using precise metric, but this will do fine for now.</p>
</div>
<div class="section level4">
<h4 id="check-then-number-of-objects-per-cell">Check then number of objects per cell<a class="anchor" aria-label="anchor" href="#check-then-number-of-objects-per-cell"></a>
</h4>
<p>Just to be sure that every bounding box that we generated has &lt;= 10 000 objects, let us query all the bounding boxes. For the current example with 6 it will take about 3 minutes, as with “example” API key the cool-down is about 30 seconds.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get objects in every bbox, but no need to get the location for now</span></span>
<span><span class="va">objects_in_bboxes</span> <span class="op">&lt;-</span> <span class="va">small_bboxes</span><span class="op">$</span><span class="va">bbox</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="fu"><a href="reference/wm_get_from_bbox.html">wm_get_from_bbox</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">.x</span>, get_location <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>, .progress <span class="op">=</span> <span class="cn">T</span> <span class="op">)</span></span></code></pre></div>
<p>Now we look at the histogram of the number of objects in the small bounding boxes and the maximum value:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n_by_bbox</span> <span class="op">&lt;-</span> <span class="va">objects_in_bboxes</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_int</a></span><span class="op">(</span><span class="op">~</span> <span class="va">.x</span><span class="op">$</span><span class="va">meta</span><span class="op">$</span><span class="va">found</span><span class="op">)</span> <span class="co"># extract the number of found objects for every bounding box</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">n_by_bbox</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 718</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">n_by_bbox</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-b_per_bbox-1.png" width="672"></p>
<p>Since the maximum is well within 10 000, we can proceed to collect the objects IDs and then download attributes for individual features. We have to download the detailed objects features one-by-one as <a href="http://wikimapia.org/api#oldbox" target="_blank" class="external-link"><code>box</code></a> API only returns object ID, name and URL. So the strategy for getting all object details is to make a list of object IDs using <a href="http://wikimapia.org/api#oldbox" target="_blank" class="external-link"><code>box</code></a> API and then use <a href="http://wikimapia.org/api#placegetbyid" target="_blank" class="external-link"><code>place.getbyid</code></a>.</p>
</div>
<div class="section level4">
<h4 id="create-a-list-of-ids-to-fetch">Create a list of IDs to fetch<a class="anchor" aria-label="anchor" href="#create-a-list-of-ids-to-fetch"></a>
</h4>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">id_list</span> <span class="op">&lt;-</span> <span class="va">objects_in_bboxes</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="op">~</span> <span class="va">.x</span><span class="op">$</span><span class="va">df</span><span class="op">$</span><span class="va">id</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co"># pull object IDs from individual bbox query results data.frames</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># bind together</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">id_list</span><span class="op">)</span></span>
<span><span class="co">#&gt;  chr [1:461] "1869857" "25258348" "14406815" "25257158" "25259631" ...</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">id_list</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "1869857"  "25258348" "14406815" "25257158" "25259631" "14406851"</span></span></code></pre></div>
<p>Now we have a list of 461 object IDs that we want to get the details for.</p>
</div>
<div class="section level4">
<h4 id="get-detailed-data-for-wikimapia-objects">Get detailed data for Wikimapia objects<a class="anchor" aria-label="anchor" href="#get-detailed-data-for-wikimapia-objects"></a>
</h4>
<p>Let’s take just 3 first objects for this example. It will take up to 1.5 minutes to fetch them with all the details using the ‘example’ API.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">short_list</span> <span class="op">&lt;-</span> <span class="va">id_list</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span>
<span><span class="va">wm_objects</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/wm_get_by_id.html">wm_get_by_id</a></span><span class="op">(</span>ids <span class="op">=</span> <span class="va">short_list</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="we-have-the-objects">We have the objects!<a class="anchor" aria-label="anchor" href="#we-have-the-objects"></a>
</h4>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">wm_objects</span>, max.level <span class="op">=</span> <span class="fl">1</span>, nchar.max <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span>
<span><span class="co">#&gt; Classes 'sf' and 'data.frame':   3 obs. of  25 variables:</span></span>
<span><span class="co">#&gt;  $ id                    : int  1869857 25258348 14406815</span></span>
<span><span class="co">#&gt;  $ object_type           : int  1 1 1</span></span>
<span><span class="co">#&gt;  $ language_id           : int  0 0 0</span></span>
<span><span class="co">#&gt;  $ language_iso          : chr  "en" "en" "en"</span></span>
<span><span class="co">#&gt;  $ language_name         : chr  "English" "English" "English"</span></span>
<span><span class="co">#&gt;  $ urlhtml               : chr  "&lt;a class=\"wikimapia-link\" href="| __truncated__ "&lt;a class=\"wikimapia-link\" href="| __truncated__ "&lt;a class=\"wikimapia-link\" href="| __truncated__</span></span>
<span><span class="co">#&gt;  $ title                 : chr  "Pudsey" "Farnley" "Morley"</span></span>
<span><span class="co">#&gt;  $ description           : chr  "Pudsey is a market town in West Y"| __truncated__ "District of the city of Leeds." "The small West Yorkshire town of "| __truncated__</span></span>
<span><span class="co">#&gt;  $ wikipedia             : chr  "http://en.wikipedia.org/wiki/Pudsey" "http://en.wikipedia.org/wiki/Farnley,_Leeds" "http://en.wikipedia.org/wiki/morley"</span></span>
<span><span class="co">#&gt;  $ is_building           : logi  FALSE FALSE FALSE</span></span>
<span><span class="co">#&gt;  $ is_region             : logi  FALSE FALSE FALSE</span></span>
<span><span class="co">#&gt;  $ is_deleted            : logi  FALSE FALSE FALSE</span></span>
<span><span class="co">#&gt;  $ parent_id             : chr  "0" "0" "0"</span></span>
<span><span class="co">#&gt;  $ x                     : chr  "-16639084" "-16233262" "-15956783"</span></span>
<span><span class="co">#&gt;  $ y                     : chr  "537924232" "537853660" "537441159"</span></span>
<span><span class="co">#&gt;  $ pl                    : num  32078 25832 22310</span></span>
<span><span class="co">#&gt;  $ is_protected          : logi  FALSE FALSE FALSE</span></span>
<span><span class="co">#&gt;  $ user_id               : chr  "904949" "904949" "539863"</span></span>
<span><span class="co">#&gt;  $ user_name             : chr  "Timea" "Timea" "jagpalpur"</span></span>
<span><span class="co">#&gt;  $ date                  : chr  "1427742742" "1427742836" "1258319330"</span></span>
<span><span class="co">#&gt;  $ deletion_state        : chr  "FALSE" "FALSE" "FALSE"</span></span>
<span><span class="co">#&gt;  $ is_in_deletion_queue  : chr  "FALSE" "FALSE" "FALSE"</span></span>
<span><span class="co">#&gt;  $ is_in_undeletion_queue: chr  "FALSE" "FALSE" "FALSE"</span></span>
<span><span class="co">#&gt;  $ details               :List of 3</span></span>
<span><span class="co">#&gt;  $ geometry              :sfc_POLYGON of length 3; first list element: List of 1</span></span>
<span><span class="co">#&gt;   ..- attr(*, "class")= chr [1:3] "XY" "POLYGON" "sfg"</span></span>
<span><span class="co">#&gt;  - attr(*, "sf_column")= chr "geometry"</span></span>
<span><span class="co">#&gt;  - attr(*, "agr")= Factor w/ 3 levels "constant","aggregate",..: NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "names")= chr [1:24] "id" "object_type" "language_id" "language_iso" ...</span></span></code></pre></div>
<div class="section level5">
<h5 id="we-can-now-plot-them">We can now plot them<a class="anchor" aria-label="anchor" href="#we-can-now-plot-them"></a>
</h5>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">wm_objects</span><span class="op">$</span><span class="va">geometry</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-obj_plot-1.png" width="672"></p>
</div>
<div class="section level5">
<h5 id="we-can-explore-the-attributes">We can explore the attributes<a class="anchor" aria-label="anchor" href="#we-can-explore-the-attributes"></a>
</h5>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">wm_objects</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "id"                     "object_type"            "language_id"           </span></span>
<span><span class="co">#&gt;  [4] "language_iso"           "language_name"          "urlhtml"               </span></span>
<span><span class="co">#&gt;  [7] "title"                  "description"            "wikipedia"             </span></span>
<span><span class="co">#&gt; [10] "is_building"            "is_region"              "is_deleted"            </span></span>
<span><span class="co">#&gt; [13] "parent_id"              "x"                      "y"                     </span></span>
<span><span class="co">#&gt; [16] "pl"                     "is_protected"           "user_id"               </span></span>
<span><span class="co">#&gt; [19] "user_name"              "date"                   "deletion_state"        </span></span>
<span><span class="co">#&gt; [22] "is_in_deletion_queue"   "is_in_undeletion_queue" "details"               </span></span>
<span><span class="co">#&gt; [25] "geometry"</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="most-of-the-details-are-currently-in-a-nested-list-for-every-object">Most of the details are currently in a nested list for every object<a class="anchor" aria-label="anchor" href="#most-of-the-details-are-currently-in-a-nested-list-for-every-object"></a>
</h5>
<p>You can use <a href="https://github.com/tidyverse/purrr" target="_blank" class="external-link">purrr</a> and/or <a href="https://github.com/renkun-ken/rlist" target="_blank" class="external-link">rlist</a> packages to pull any of the details from these nested lists.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">wm_objects</span><span class="op">$</span><span class="va">details</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>, max.level <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 5</span></span>
<span><span class="co">#&gt;  $ tags              :List of 1</span></span>
<span><span class="co">#&gt;  $ photos            : list()</span></span>
<span><span class="co">#&gt;  $ comments          : list()</span></span>
<span><span class="co">#&gt;  $ location          :List of 15</span></span>
<span><span class="co">#&gt;  $ availableLanguages:List of 1</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="to-do-list">To-Do List<a class="anchor" aria-label="anchor" href="#to-do-list"></a>
</h3>
<ul>
<li><p>Rewrite <code><a href="reference/subdivide_bbox.html">subdivide_bbox()</a></code> to accept metric values for bbox dimensions (not critical, but may be useful for other projects)</p></li>
<li><p>Create a few more helper functions to abstract the user from the calls to <code>purrr</code> for simple things like getting the number of found objects, or for getting number of objects per bounding box (see examples above in the Usage section)</p></li>
<li><p>Create a hidden environment variable for storing API key and using it automatically in the package functions</p></li>
<li><p>Implement the rest of the Wikimapia API functions</p></li>
<li><p>Fix bugs if any</p></li>
<li><p>Make code more robust</p></li>
<li><p>Write unit tests</p></li>
<li><p>Your suggestions are welcome via GitHub issues for this package</p></li>
<li><p>Submit the package to CRAN someday..?</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h3>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation</a></span><span class="op">(</span><span class="st">"wikimapR"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation</a></span><span class="op">(</span><span class="st">"wikimapR"</span><span class="op">)</span>, bibtex<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>To cite wikimapR in publications, please use:</p>
<blockquote>
<p>Kotov (2018). wikimapR: Import Wikimapia Data as Simple Features via API. DOI: 10.5281/zenodo.3459878. <a href="https://github.com/e-kotov/wikimapR" class="external-link uri">https://github.com/e-kotov/wikimapR</a></p>
</blockquote>
<p>A BibTeX entry for LaTeX users is:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>  <span class="sc">@</span>Manual{,</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    title <span class="ot">=</span> {wikimapR<span class="sc">:</span> Import Wikimapia Data as Simple Features via API},</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    author <span class="ot">=</span> {Egor Kotov},</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    doi <span class="ot">=</span> {<span class="fl">10.5281</span><span class="sc">/</span>zenodo<span class="fl">.3459878</span>},</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    year <span class="ot">=</span> {<span class="dv">2018</span>},</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    url <span class="ot">=</span> {https<span class="sc">:</span><span class="er">//</span>github.com<span class="sc">/</span>e<span class="sc">-</span>kotov<span class="sc">/</span>wikimapR},</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  }</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h3>
<p>The MIT License (MIT) + License File</p>
<p>Copyright © 2018 Egor Kotov</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the “Software”), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/e-kotov/wikimapR/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/e-kotov/wikimapR/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing wikimapR</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Egor Kotov <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-6690-5345" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Egor Kotov.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
